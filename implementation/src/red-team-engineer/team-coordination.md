# Red Team Coordination & Rules of Engagement

This document defines the operational protocols, communication triggers, and handoff procedures for the Red Team Operator within the TechNova project.

## Table of Contents
1. [Operational Phases & Triggers](#1-operational-phases--triggers)
2. [Communication Protocol](#2-communication-protocol)
3. [Interaction with Other Roles](#3-interaction-with-other-roles)
4. [Tools & Artifacts Handoff](#4-tools--artifacts-handoff)
5. [Phase-Specific Coordination with Threat Analyst](#5-phase-specific-coordination-with-threat-analyst)

## 1. Operational Phases & Triggers

The Red Team activities are strictly bound to specific project phases. Operations outside these windows are unauthorized.

| Phase | Trigger Event | Red Team Action | Handoff To |
| :--- | :--- | :--- | :--- |
| **Phase 0** | Infrastructure Ready | **Connectivity Check:** Verify SSH to Linux & RDP to Windows. Confirm Caldera agent connectivity. | Blue Team (for Monitoring Setup) |
| **Phase 1** | Blue Team "Ready" Signal | **Execute Baseline Attack:** Run `Project_Story_Mode`. Generate noise (port scans) and artifacts. | Threat Analyst (for Detection) |
| **Phase 2** | N/A | **Standby:** Assist Analyst with timestamps and attack logic explanation if detection fails. | Blue Team (for Hardening) |
| **Phase 3** | Blue Team "Hardened" Signal | **Execute Re-run:** Attempt same attacks against new defenses. Document failures. | Project Lead (Final Report) |

---

## 2. Communication Protocol

To ensure accurate logging by the Threat Analyst, the Red Team will broadcast the following signals via the team channel:

### START SIGNAL
> "üö® **RED TEAM OP STARTING:** Operation `[Op_Name]` initiated against targets `10.10.0.50` and `10.10.0.51`. Timestamp: `[HH:MM]`."

### STOP SIGNAL
> "üõë **RED TEAM OP FINISHED:** All objectives executed. Artifacts created: `Exfil_Proof.txt`, `psexec` service. Please preserve logs."

### BLOCKER REPORT (Infrastructure Issues)
> "‚ö†Ô∏è **OP PAUSED:** Technical blocker detected (e.g., Auth Failure). Ticket assigned to Infrastructure Engineer."

---

## 3. Interaction with Other Roles

### Interface with Infrastructure Engineer
*   **Request:** Credentials, IP allocation, specific software pre-installation (e.g., python3 on Linux).
*   **Provide:** Feedback on network visibility and access controls.

### Interface with Blue Team Engineer
*   **Adversary Emulation:** Provide the specific TTPs (Tactics, Techniques, and Procedures) used so they can tune their WAF/IDS rules.
*   **Debrief:** Explain how specific blocks (e.g., Defender) affected the attack chain.

### Interface with Threat Analyst
*   **Time Synchronization:** Ensure Caldera server time matches SIEM time.
*   **Ground Truth:** Provide the "Execution Log" to validate whether the SIEM actually detected the attack or if it was a false negative.

---

## 4. Tools & Artifacts Handoff

The technical evidence generated by CALDERA operations is stored in the project's **`results/`** directory for cross-team analysis.

### Phase 1: Baseline (Vulnerable State)
*   **Path:** `results/red_team/phase1-baseline/`
*   **Artifacts:**
    *   `phase1_operation_report.pdf` (Executive summary)
    *   `phase1_mitre_layer.json` (ATT&CK Matrix)
    *   `phase1_raw_logs.json` (Detailed event logs)

### Phase 2: Hardening Verification (Secured State)
*   **Path:** `results/red_team/phase2-hardening/`
*   **Artifacts:**
    *   `phase2_operation_report.pdf` (Executive summary of blocked attacks)
    *   `phase2_operation_data.json` (Raw data showing failures/timeouts)
    *   `phase2_mitre_layer.json` (ATT&CK Matrix)

**Note:** Screenshots and visual evidence are stored within the `src/red-team-engineer/images/phase1/` and `images/phase2/` directories and referenced in the markdown documentation.

---

## 5. Phase-Specific Coordination with Threat Analyst

The Red Team coordinates with the Threat Analyst (who uses Wazuh SIEM) in both Phase 1 and Phase 2 to ensure accurate detection validation.

### Phase 1: Baseline Attack Coordination
In Phase 1, the focus is on generating detectable activity for baseline monitoring.

*   **Handoff of Execution Logs:** Provide logs from `results/red_team/phase1-baseline/phase1_operation_logs.json` for initial detection testing.
*   **Assistance:** Explain attack logic if needed, e.g., "This port scan is noise to trigger alerts."
*   **Time Synchronization:** Ensure Caldera and Wazuh times match for accurate correlation.
*   **Expected Outcome:** Confirm that Wazuh detects key attacks (e.g., credential access, lateral movement) in the vulnerable state.

### Phase 2: Hardening Verification Coordination
In Phase 2, collaboration validates that hardening measures improve detection without false negatives.

*   **Handoff of Execution Logs:** Provide logs from `results/red_team/phase2-hardening/phase2_operation_logs.json` for post-hardening validation.
*   **Assistance in Validation:** If Wazuh misses an attack, explain why (e.g., "Lateral movement blocked by firewall, but should still log the attempt").
*   **Time Synchronization:** Align timestamps between Caldera and Wazuh.
*   **Communication:** Use team channel for consultations, e.g., "Analyst, verify PsExec block at [timestamp]."
*   **Expected Outcome:** Verify critical attacks are detected; document gaps for Blue Team improvements.